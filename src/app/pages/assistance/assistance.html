<main class="container-fluid my-4">
    <div class="row g-4">
        <div class="col-lg-12 mb-3">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="card-title">Asistencia</h2>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center gap-3">
                        <select class="form-select selec" [(ngModel)]="carreraSeleccionada"
                            (change)="onCarreraSeleccionada(carreraSeleccionada?.id)">
                            <option [ngValue]="null" disabled>Seleccionar una carrera</option>
                            <option *ngFor="let carrera of carreras" [ngValue]="carrera">
                                {{ carrera.carreNombre }}
                            </option>
                        </select>

                        <div *ngIf="cargando" class="mt-2 text-muted">
                            Cargando carreras...
                        </div>
                        <select class="form-select selec bg-dark text-light" [(ngModel)]="selectedClaseId"
                            (change)="onClaseSeleccionada()">
                            <option value="">Selecciona una clase</option>
                            <option *ngFor="let clase of clasesFiltradas" [value]="clase.id">
                                {{ clase.fecha | date:'shortDate' }} - {{ clase.materia?.matNombre || 'Sin materia' }}
                            </option>
                        </select>
                        <p *ngIf="clasesFiltradas.length === 0 && carreraSeleccionada" class="text-muted">No hay clases
                            para esta carrera.</p>
                    </div>
                    <hr>

                    <div class="table-responsive tabla">
                        <table *ngIf="estudiantes.length > 0" class="table table-striped table-hover table-bordered">
                            <thead class="table-dark">
                                <tr>
                                    <th>Alumno</th>
                                    <th>Carrera</th>
                                    <th>Presente</th>
                                    <th>Observaci贸n</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let est of alumnosFiltrados; let i = index">
                                    <td>{{ est.nombre_completo }}</td>
                                    <td>{{ est.carrera }}</td>
                                    <td>
                                        <label [for]="'presente-' + i" class="visually-hidden">Presente para {{
                                            est.nombre_completo }}</label>
                                        <input type="checkbox" [id]="'presente-' + i" [(ngModel)]="est.presente">
                                    </td>
                                    <td>
                                        <label [for]="'observacion-' + i" class="visually-hidden">Observaci贸n para {{
                                            est.nombre_completo }}</label>
                                        <input type="text" [id]="'observacion-' + i" [(ngModel)]="est.observacion"
                                            placeholder="Observaci贸n (opcional)">
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Mensaje si no hay alumnos -->
                        <p *ngIf="estudiantes.length === 0 && selectedClaseId" class="text-muted">No hay alumnos
                            inscriptos en esta clase.</p>

                        <!-- Bot贸n para guardar (ya lo tienes) -->
                        <!-- <button (click)="guardarAsistencia()" [disabled]="estudiantes.length === 0">Guardar
                            Asistencia
                        </button> -->
                    </div>

                </div>
            </div>
        </div>
    </div>

</main>